---
import fs from 'fs';
import path from 'path';
const { lang } = Astro.params;
const currentLang = lang;
const global = JSON.parse(fs.readFileSync(path.resolve(`./src/json/global.json`), 'utf-8'));
const origin = Astro.url.origin
const pageTitle = global.siteTitle;
---

<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>

		<div class="flex">
			<a href={origin}>home</a>
			Current language: {currentLang}
			<h3>Multilanguages - works</h3>
			<nav>
				{
					global.navHeader &&
						global.navHeader.map((item) => {
								return (
									<a
										href={`${currentLang}/${item.uri}`}
										target={'_self'}
										rel='noopener'
										}
									>
										{item.title}
									</a>
								);
						})
				}
			</nav>
			<h3>Single Language - not working!</h3>
			<nav class="flex">
				{
					global.navHeader &&
						global.navHeader.map((item) => {
								return (
									<a
										href={`/${item.uri}`}
										target={'_self'}
										rel='noopener'
										}
									>
										{item.title}
									</a>
								);
						})
				}
			</nav>
		</div>

	</body>
</html>

<style lang="css">
	nav, .flex {
		display: flex;
		flex-direction: column;
		gap: 2rem;
	}

</style>